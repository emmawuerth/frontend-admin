(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{d273d747b8b321e7e80a:function(e,t,n){"use strict";n.r(t);var r,o=n("8af190b70a6bc55c6f1b"),i=n.n(o),a=(n("8a2d1b95e05b6a321e74"),n("1037a6e0d5914309f74c")),c=n.n(a),u=n("0d7f0986bcd2f33d8a2a"),s=n("6938d226fd372a75cbf9"),l=n("d4df020feb07c4f688e4"),f=n.n(l),d=n("75a379dc079e44a3500a"),p=n.n(d),m=n("e68eb59aa96fc65ab714"),y=n.n(m),b=n("e95a63b25fb92ed15721"),v=n("ecbdedbb63dd08b2841e"),g=n.n(v),h=n("c7fd554010f79f6c0ef8"),w=n.n(h),k=n("d7dd51e1bf6bfc2c9c3d"),x=n("ab4cb61bcb2dc161defb"),_=n("39cd24fdebf6cbef88a3"),A=n("497e4ec78fa04872c601"),O=n("f0ba068ec8402cf31cb6"),j=n("d2a89f370b75ddd729b8");function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,o){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});if(1===a)t.children=o;else if(a>1){for(var u=new Array(a),s=0;s<a;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){P(i,r,o,a,c,"next",e)}function c(e){P(i,r,o,a,c,"throw",e)}a(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=S(y.a,{size:"small",variant:"outlined",color:"secondary"}),B=S(p.a,{size:"small",variant:"outlined",color:"secondary"}),z=S(j.a,{}),J=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=I(t).call(this,e),n=!o||"object"!==R(o)&&"function"!==typeof o?D(r):o,F(D(n),"changeActions",function(){var e=C(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.allActions,o=r.filter((function(e){return e.community&&e.community.id===t||e.is_global})),e.next=4,n.setStateAsync({data:n.fashionData(o)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F(D(n),"fashionData",(function(e){return e.map((function(e){return[e.id,{id:e.id,image:e.image,initials:"".concat(e.title&&e.title.substring(0,2).toUpperCase())},"".concat(e.title,"...").substring(0,30),{rank:e.rank,id:e.id},"".concat(e.tags.map((function(e){return e.name})).join(", ")," "),e.is_global?"Template":e.community&&e.community.name,e.is_published?"Yes":"No",e.id]}))})),F(D(n),"getColumns",(function(){return[{name:"ID",key:"id",options:{filter:!0,filterType:"textField"}},{name:"Image",key:"image",options:{filter:!1,download:!1,customBodyRender:function(e){return S("div",{},void 0,e.image&&S(g.a,{alt:e.initials,src:e.image.url,style:{margin:10}}),!e.image&&S(g.a,{style:{margin:10}},void 0,e.initials))}}},{name:"Title",key:"title",options:{filter:!1,filterType:"textField"}},{name:"Rank",key:"rank",options:{filter:!1,customBodyRender:function(e){return S(w.a,{required:!0,name:"rank",variant:"outlined",onChange:function(){var t=C(regeneratorRuntime.mark((function t(n){var r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target){t.next=3;break}return t.abrupt("return");case 3:return o=r.name,i=r.value,t.next=6,Object(_.a)("/actions.update",F({action_id:e&&e.id},o,i));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),label:"Rank",InputLabelProps:{shrink:!0,maxwidth:"10px"},defaultValue:e&&e.rank})}}},{name:"Tags",key:"tags",options:{filter:!0,filterType:"textField"}},{name:"Community",key:"community",options:{filter:!0,filterType:"multiselect"}},{name:"Is Live?",key:"is_live",options:{filter:!0}},{name:"Edit? Copy?",key:"edit_or_copy",options:{filter:!1,download:!1,customBodyRender:function(e){return S("div",{},void 0,S(b.Link,{to:"/admin/edit/".concat(e,"/action"),target:"_blank"},void 0,L),"\xa0\xa0",S(b.Link,{onClick:C(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)("/actions.copy",{action_id:e});case 2:(n=t.sent)&&n.success&&(r=n&&n.data,window.location.href="/admin/edit/".concat(r.id,"/action"));case 4:case"end":return t.stop()}}),t)}))),to:"/admin/read/actions"},void 0,B))}}}]})),n.state={columns:n.getColumns(),loading:!0,allActions:[],data:[]},n}var n,r,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(i=C(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)("/actions.listForCommunityAdmin");case 2:if(!(t=e.sent)||!t.success){e.next=7;break}return Object(O.a)(t.data),e.next=7,this.setStateAsync({loading:!1,allActions:t.data,data:this.fashionData(t.data)});case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=c.a.name+" - All Actions",t=c.a.desc,n=this.props.classes,r=this.state,o=r.columns,i=r.loading,a=r.data;if(i)return z;var s={filterType:"dropdown",responsive:"stacked",print:!0,rowsPerPage:100,onRowsDelete:function(e){e.data.forEach(function(){var e=C(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[t.dataIndex][0],e.next=3,Object(_.a)("/actions.delete",{action_id:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}};return S("div",{},void 0,S(u.Helmet,{},void 0,S("title",{},void 0,e),S("meta",{name:"description",content:t}),S("meta",{property:"og:title",content:e}),S("meta",{property:"og:description",content:t}),S("meta",{property:"twitter:title",content:e}),S("meta",{property:"twitter:description",content:t})),S("div",{className:n.table},void 0,S(f.a,{title:"All Actions",data:a,columns:o,options:s})))}}])&&T(n.prototype,r),o&&T(n,o),t}(i.a.Component),N=Object(k.connect)((function(e){return{auth:e.getIn(["auth"]),allActions:e.getIn(["allActions"]),community:e.getIn(["selected_community"])}}),(function(e){return Object(x.bindActionCreators)({callAllActions:O.f,callCommunityActions:O.g},e)}))(J);t.default=Object(s.withStyles)(A.a)(N)}}]);