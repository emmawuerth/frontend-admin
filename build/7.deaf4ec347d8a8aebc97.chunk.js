(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{d1f8c791804144f55922:function(e,t,n){"use strict";n.r(t);var r,o=n("8af190b70a6bc55c6f1b"),i=n.n(o),a=n("0d7f0986bcd2f33d8a2a"),l=n("1037a6e0d5914309f74c"),c=n.n(l),u=(n("8a2d1b95e05b6a321e74"),n("6938d226fd372a75cbf9")),s=n("39cd24fdebf6cbef88a3"),f=n("cba78edefe8c800ee17e");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,o){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&i)for(var l in i)void 0===t[l]&&(t[l]=i[l]);else t||(t=i||{});if(1===a)t.children=o;else if(a>1){for(var c=new Array(a),u=0;u<a;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}function m(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,l,"next",e)}function l(e){m(i,r,o,a,l,"throw",e)}a(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P,S=d("div",{}),x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=v(t).call(this,e),n=!o||"object"!==p(o)&&"function"!==typeof o?w(r):o,O(w(n),"createFormJson",b(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.communities,r={title:"Create New Policy",subTitle:"",cancelLink:"/admin/read/policies",method:"/policies.create",successRedirectPage:"/admin/read/policies",fields:[{label:"About this Policy",fieldType:"Section",children:[{name:"name",label:"Name of Policy",placeholder:"eg. Terms and Conditions",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"name",readOnly:!1},{name:"is_global",label:"Is this Policy a Template?",fieldType:"Radio",isRequired:!1,defaultValue:"true",dbName:"is_global",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"false",fields:[{name:"community",label:"Primary Community",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:null,dbName:"community_id",data:t}]}}]},{name:"description",label:"Policy Details",placeholder:"eg. Provide details about this Policy ...",fieldType:"HTMLField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:"",dbName:"description",readOnly:!1}]},e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))),n.state={communities:[],formJson:null},n}var n,r,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(i=b(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)("/communities.listForCommunityAdmin");case 2:if(!(t=e.sent)||!t.data){e.next=7;break}return n=t.data.map((function(e){return y({},e,{displayName:e.name})})),e.next=7,this.setStateAsync({communities:n});case 7:return e.next=9,this.createFormJson();case 9:return r=e.sent,e.next=12,this.setStateAsync({formJson:r});case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formJson;return t?d("div",{},void 0,d(f.a,{classes:e,formJson:t})):S}}])&&h(n.prototype,r),o&&h(n,o),t}(o.Component),T=Object(u.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:4*e.spacing.unit,textAlign:"center"}}}),{withTheme:!0})(x);n("b8d4965bd52b94937ce4");function j(e){return(j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,n,r){P||(P="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var l=new Array(i),c=0;c<i;c++)l[c]=arguments[c+3];t.children=l}return{$$typeof:P,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}function R(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){R(i,r,o,a,l,"next",e)}function l(e){R(i,r,o,a,l,"throw",e)}a(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F,V=_("div",{}),q=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=A(t).call(this,e),n=!o||"object"!==j(o)&&"function"!==typeof o?D(r):o,J(D(n),"createFormJson",C(regeneratorRuntime.mark((function e(){var t,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.communities,o=t.policy,i=window.location.pathname,a={title:"Create New Policy",subTitle:"",method:"/policies.update",cancelLink:"/admin/read/policies",successRedirectPage:i||"/admin/read/policies",fields:[{label:"About this Policy",fieldType:"Section",children:[{name:"ID",label:"ID",placeholder:"eg. 1",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:o&&o.id,dbName:"policy_id",readOnly:!0},{name:"name",label:"Name of Policy",placeholder:"eg. Terms and Conditions",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:o&&o.name,dbName:"name",readOnly:!1},{name:"is_global",label:"Is this Policy a Template?",fieldType:"Radio",isRequired:!1,defaultValue:o&&o.is_global?"true":"false",dbName:"is_global",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"false",fields:[{name:"community",label:"Primary Community",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:o&&o.community&&""+o.community.id,dbName:"community_id",data:r}]}}]},{name:"description",label:"Policy Details",placeholder:"eg. Provide details about this Policy ...",fieldType:"HTMLField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:o&&o.description,dbName:"description",readOnly:!1}]},e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))),n.state={formData:{},policy:null,communities:[]},n}var n,r,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(i=C(regeneratorRuntime.mark((function e(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,Object(s.a)("/policies.info",{policy_id:t});case 3:return n=e.sent,e.next=6,Object(s.a)("/communities.listForCommunityAdmin");case 6:if(r=e.sent,!n||!n.success){e.next=10;break}return e.next=10,this.setStateAsync({policy:n.data});case 10:if(!r||!r.data){e.next=14;break}return o=r.data.map((function(e){return k({},e,{id:""+e.id,displayName:e.name})})),e.next=14,this.setStateAsync({communities:o});case 14:return e.next=16,this.createFormJson();case 16:return i=e.sent,e.next=19,this.setStateAsync({formJson:i});case 19:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formJson;return t?_("div",{},void 0,_(f.a,{classes:e,formJson:t})):V}}])&&N(n.prototype,r),o&&N(n,o),t}(o.Component),B=Object(u.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},container:{display:"flex",flexWrap:"wrap"},menu:{width:200}}}),{withTheme:!0})(q);function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t,n,r){F||(F="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var l=new Array(i),c=0;c<i;c++)l[c]=arguments[c+3];t.children=l}return{$$typeof:F,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(){return I(this,t),L(this,H(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.location.pathname.includes("edit"),t=c.a.name+" - Create Policy",n=c.a.desc;return $("div",{},void 0,$(a.Helmet,{},void 0,$("title",{},void 0,t),$("meta",{name:"description",content:n}),$("meta",{property:"og:title",content:t}),$("meta",{property:"og:description",content:n}),$("meta",{property:"twitter:title",content:t}),$("meta",{property:"twitter:description",content:n})),!e&&i.a.createElement(T,this.props),e&&i.a.createElement(B,this.props))}}])&&W(n.prototype,r),o&&W(n,o),t}(i.a.Component);t.default=Y}}]);