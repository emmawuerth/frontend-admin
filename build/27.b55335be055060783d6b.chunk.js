(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{a42fae5b16fba9429978:function(e,t,n){"use strict";n.r(t);var o,i=n("8af190b70a6bc55c6f1b"),r=n.n(i),a=(n("8a2d1b95e05b6a321e74"),n("6938d226fd372a75cbf9")),c=n("0d7f0986bcd2f33d8a2a"),s=n("1037a6e0d5914309f74c"),l=n.n(s),u=n("d4df020feb07c4f688e4"),d=n.n(u),f=n("75a379dc079e44a3500a"),m=n.n(f),p=n("e68eb59aa96fc65ab714"),b=n.n(p),y=n("e95a63b25fb92ed15721"),v=n("ecbdedbb63dd08b2841e"),h=n.n(v),g=n("b02fe3f80d4238b52f20"),w=n.n(g),k=n("d1481ba7d88efe885afa"),_=n.n(k),E=n("435859b6b76fb67a754a"),O=n.n(E),j=n("d7dd51e1bf6bfc2c9c3d"),S=n("ab4cb61bcb2dc161defb"),P=n("39cd24fdebf6cbef88a3"),x=n("497e4ec78fa04872c601"),A=n("f0ba068ec8402cf31cb6");n("f0c29d4e930a8d1ed293");function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n,o,i,r,a){try{var c=e[r](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){T(r,o,i,a,c,"next",e)}function c(e){T(r,o,i,a,c,"throw",e)}a(void 0)}))}}function F(e,t,n,i){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});if(1===a)t.children=i;else if(a>1){for(var s=new Array(a),l=0;l<a;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=F(b.a,{size:"small",variant:"outlined",color:"secondary"}),J=F(m.a,{size:"small",variant:"outlined",color:"secondary"}),$=F(_.a,{}),H=F("h1",{},void 0,"Fetching all Events.  This may take a while..."),M=F("br",{}),U=F(_.a,{color:"secondary"}),Y=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=N(t).call(this,e))||"object"!==R(i)&&"function"!==typeof i?D(o):i,z(D(n),"fashionData",(function(e){return e.map((function(e){return[e.id,{id:e.id,image:e.image,initials:"".concat(e.name&&e.name.substring(0,2).toUpperCase())},"".concat(e.name,"...").substring(0,30),e.rank,"".concat(e.tags.map((function(e){return e.name})).join(", ")),e.is_global?"Template":e.community&&e.community.name,e.is_published?"Yes":"No",e.id]}))})),z(D(n),"getColumns",(function(){return[{name:"ID",key:"id",options:{filter:!1,filterType:"textField"}},{name:"Event",key:"event",options:{filter:!1,download:!1,customBodyRender:function(e){return F("div",{},void 0,e.image&&F(h.a,{alt:e.initials,src:e.image.url,style:{margin:10}}),!e.image&&F(h.a,{style:{margin:10}},void 0,e.initials))}}},{name:"Name",key:"name",options:{filter:!1}},{name:"Rank",key:"rank",options:{filter:!1}},{name:"Tags",key:"tags",options:{filter:!0,filterType:"textField"}},{name:"Community",key:"community",options:{filter:!0,filterType:"multiselect"}},{name:"Is Live",key:"is_live",options:{filter:!0}},{name:"Edit?",key:"edit_or_copy",options:{filter:!1,download:!1,customBodyRender:function(e){return F("div",{},void 0,F(y.Link,{to:"/admin/edit/".concat(e,"/event"),target:"_blank"},void 0,B),"\xa0\xa0",F(y.Link,{onClick:C(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.a)("/events.copy",{event_id:e});case 2:(n=t.sent)&&n.success&&(o=n&&n.data,window.location.href="/admin/edit/".concat(o.id,"/event"));case 4:case"end":return t.stop()}}),t)}))),to:"/admin/read/events"},void 0,J))}}}]})),n.state={data:[],loading:!0,columns:n.getColumns()},n}var n,o,i,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:(r=C(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth?this.props.auth:{},n=this.props.community?this.props.community:{},t.is_super_admin&&this.props.callForSuperAdminEvents(),t.is_community_admin&&(o=n||t.admin_at[0],this.props.callForNormalAdminEvents(o.id)),e.next=6,this.setStateAsync({loading:!1});case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=l.a.name+" - All Events",t=l.a.desc,n=this.state,o=n.columns,i=n.loading,r=this.props.classes,a=this.fashionData(this.props.allEvents),s={filterType:"dropdown",responsive:"stacked",print:!0,rowsPerPage:100,onRowsDelete:function(e){e.data.forEach((function(e){var t=a[e.dataIndex][0];Object(P.a)("/events.delete",{event_id:t})}))}};return i?F(O.a,{container:!0,spacing:24,alignItems:"flex-start",direction:"row",justify:"center"},void 0,F(O.a,{item:!0,xs:12,md:6},void 0,F(w.a,{className:r.root},void 0,F("div",{className:r.root},void 0,$,H,M,U)))):F("div",{},void 0,F(c.Helmet,{},void 0,F("title",{},void 0,e),F("meta",{name:"description",content:t}),F("meta",{property:"og:title",content:e}),F("meta",{property:"og:description",content:t}),F("meta",{property:"twitter:title",content:e}),F("meta",{property:"twitter:description",content:t})),F("div",{className:r.table},void 0,F(d.a,{title:"All Events",data:a,columns:o,options:s})))}}])&&I(n.prototype,o),i&&I(n,i),t}(r.a.Component);var q=Object(j.connect)((function(e){return{auth:e.getIn(["auth"]),allEvents:e.getIn(["allEvents"]),community:e.getIn(["selected_community"])}}),(function(e){return Object(S.bindActionCreators)({callForSuperAdminEvents:A.n,callForNormalAdminEvents:A.h},e)}))(Y);t.default=Object(a.withStyles)(x.a)(q)}}]);