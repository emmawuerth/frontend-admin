(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"38730947b3b0666608c3":function(e,t,n){"use strict";n.r(t);var o,r=n("8af190b70a6bc55c6f1b"),a=n.n(r),i=n("0d7f0986bcd2f33d8a2a"),l=n("1037a6e0d5914309f74c"),c=n.n(l),u=n("4dd2a92e69dcbe1bab10"),s=(n("8a2d1b95e05b6a321e74"),n("6938d226fd372a75cbf9")),d=n("39cd24fdebf6cbef88a3"),f=n("cba78edefe8c800ee17e");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n,r){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){T(e,t,n[t])}))}return e}function b(e,t,n,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){b(a,o,r,i,l,"next",e)}function l(e){b(a,o,r,i,l,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _,S=m("div",{}),k=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=w(t).call(this,e),n=!r||"object"!==p(r)&&"function"!==typeof r?g(o):r,T(g(n),"createFormJson",h(regeneratorRuntime.mark((function e(){var t,o,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,o=t.communities,r=t.ccActions,a=t.vendors,i={title:"Create a New Action",subTitle:"",method:"/actions.create",successRedirectPage:"/admin/read/actions",fields:[{label:"About this Action",fieldType:"Section",children:[{name:"title",label:"Title of Action (Between 4 and 40 characters)",placeholder:"Use Heat Pumps",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"title",readOnly:!1},{name:"rank",label:"Rank (Which order should this action appear in?  Lower numbers come first)",placeholder:"eg. 1",fieldType:"TextField",contentType:"number",isRequired:!0,defaultValue:"",dbName:"rank",readOnly:!1},{name:"is_global",label:"Is this Action a Template?",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"is_global",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"false",fields:[{name:"community",label:"Primary Community",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:null,dbName:"community_id",data:o}]}},{name:"is_published",label:"Should this action go live?",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"is_published",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}]}]},{label:"Carbon Calculator - Link your Action to one of our Carbon Calculator Actions",fieldType:"Section",children:[{name:"calculator_action",label:"Calculator Action",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:null,dbName:"calculator_action",data:r,modalTitle:"Carbon Action List & Instructions",modalText:"Check out the instructions here: https://docs.google.com/document/d/1b-tCB83hKk9yWFcB15YdHBORAFOPyh63c8jt1i15WL4"}]},{name:"featured_summary",label:"Featured Summary",placeholder:"eg. This event is happening in ...",fieldType:"TextField",isMulti:!0,isRequired:!0,defaultValue:null,dbName:"featured_summary"},{name:"about",label:"Write some detailed description about this action",placeholder:"eg. This event is happening in ...",fieldType:"HTMLField",isRequired:!0,defaultValue:null,dbName:"about"},{name:"steps_to_take",label:"Please outline steps to take for your users",placeholder:"eg. This event is happening in ...",fieldType:"HTMLField",isRequired:!0,defaultValue:null,dbName:"steps_to_take"},{name:"deep_dive",label:"Deep dive into all the details",placeholder:"eg. This action ...",fieldType:"HTMLField",isRequired:!0,defaultValue:null,dbName:"deep_dive"},{name:"vendors",label:"Select which vendors provide services for this action",placeholder:"eg. Solarize Wayland",fieldType:"Checkbox",selectMany:!0,defaultValue:null,dbName:"vendors",data:a},{name:"image",placeholder:"Select an Image",fieldType:"File",dbName:"image",label:"Upload Files",isRequired:!1,defaultValue:"",filesLimit:1}]},e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})))),n.state={communities:[],ccActions:[],vendors:[],formJson:null},n}var n,o,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:(a=h(regeneratorRuntime.mark((function e(){var t,n,o,r,a,i,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)("/tag_collections.listForCommunityAdmin");case 2:return t=e.sent,e.next=5,Object(d.a)("/communities.listForCommunityAdmin");case 5:return n=e.sent,e.next=8,Object(d.a)("/vendors.listForCommunityAdmin");case 8:return o=e.sent,e.next=11,Object(d.a)("/cc/info/actions",{},null,!0);case 11:if(r=e.sent,!n||!n.data){e.next=16;break}return a=n.data.map((function(e){return y({},e,{displayName:e.name,id:""+e.id})})),e.next=16,this.setStateAsync({communities:a});case 16:if(!o||!o.data){e.next=20;break}return i=o.data.map((function(e){return y({},e,{displayName:e.name,id:""+e.id})})),e.next=20,this.setStateAsync({vendors:i});case 20:if(!(r&&r.data&&r.data.actions)){e.next=24;break}return l=(r.data.actions||[]).map((function(e){return y({},e,{displayName:e.description,id:""+e.id})})),e.next=24,this.setStateAsync({ccActions:l});case 24:return e.next=26,this.createFormJson();case 26:return c=e.sent,t&&t.data&&(u={label:"Please select tag(s) that apply to this action",fieldType:"Section",children:[]},Object.values(t.data).forEach((function(e){var t={name:e.name,label:"".concat(e.name," ").concat(e.allow_multiple?"(You can select multiple)":"(Only one selection allowed)"),placeholder:"",fieldType:"Checkbox",selectMany:e.allow_multiple,defaultValue:[],dbName:"tags",data:e.tags.map((function(e){return y({},e,{displayName:e.name,id:""+e.id})}))};u.children.push(t)})),c.fields.splice(1,0,u)),e.next=30,this.setStateAsync({formJson:c});case 30:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formJson;return t?m("div",{},void 0,m(f.a,{classes:e,formJson:t})):S}}])&&v(n.prototype,o),r&&v(n,r),t}(r.Component),x=Object(s.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:4*e.spacing.unit,textAlign:"center"}}}),{withTheme:!0})(k);function j(e){return(j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,n,o){_||(_="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var i in r)void 0===t[i]&&(t[i]=r[i]);else t||(t=r||{});if(1===a)t.children=o;else if(a>1){for(var l=new Array(a),c=0;c<a;c++)l[c]=arguments[c+3];t.children=l}return{$$typeof:_,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==j(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=A(u.j,{title:"Add New Action",desc:""},void 0,A(x,{})),q=function(e){function t(){return P(this,t),C(this,R(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=c.a.name+" - Create New Action",t=c.a.desc;return A("div",{},void 0,A(i.Helmet,{},void 0,A("title",{},void 0,e),A("meta",{name:"description",content:t}),A("meta",{property:"og:title",content:e}),A("meta",{property:"og:description",content:t}),A("meta",{property:"twitter:title",content:e}),A("meta",{property:"twitter:description",content:t})),V)}}])&&N(n.prototype,o),r&&N(n,r),t}(a.a.Component);t.default=q}}]);