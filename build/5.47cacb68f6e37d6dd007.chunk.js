(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{d733372f965ac49fed73:function(e,t,n){"use strict";n.r(t);var a,r=n("8af190b70a6bc55c6f1b"),i=n.n(r),o=n("0d7f0986bcd2f33d8a2a"),l=n("1037a6e0d5914309f74c"),d=n.n(l),u=(n("8a2d1b95e05b6a321e74"),n("0f3f99fcfbc6583697d9")),c=n.n(u),s=n("6938d226fd372a75cbf9"),f=n("39cd24fdebf6cbef88a3"),p=n("cba78edefe8c800ee17e");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n,r){a||(a="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&i)for(var l in i)void 0===t[l]&&(t[l]=i[l]);else t||(t=i||{});if(1===o)t.children=r;else if(o>1){for(var d=new Array(o),u=0;u<o;u++)d[u]=arguments[u+3];t.children=d}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){O(e,t,n[t])}))}return e}function h(e,t,n,a,r,i,o){try{var l=e[i](o),d=l.value}catch(e){return void n(e)}l.done?t(d):Promise.resolve(d).then(a,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){h(i,a,r,o,l,"next",e)}function l(e){h(i,a,r,o,l,"throw",e)}o(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x,S=y("div",{},void 0,"Loading..."),N=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=T(t).call(this,e),n=!r||"object"!==m(r)&&"function"!==typeof r?w(a):r,O(w(n),"createFormJson",v(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.communities,a={title:"Create New Event or Campaign",subTitle:"",method:"/events.create",successRedirectPage:"/admin/read/events",fields:[{label:"About this event",fieldType:"Section",children:[{name:"name",label:"Name of Event or Campaign",placeholder:"Wayland Heatpump Event",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"name",readOnly:!1},{name:"featured_summary",label:"One sentence that describes this event",placeholder:"Wayland Heatpump Event",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"featured_summary",readOnly:!1},{name:"rank",label:"Rank (Which order should this event appear in?  Lower numbers come first)",placeholder:"eg. 1",fieldType:"TextField",contentType:"number",isRequired:!0,defaultValue:"",dbName:"rank",readOnly:!1},{name:"start_date_and_time",label:"Start Date And Time",placeholder:"YYYY-MM-DD HH:MM",fieldType:"DateTime",contentType:"text",isRequired:!0,defaultValue:"",dbName:"start_date_and_time",readOnly:!1},{name:"end_date_and_time",label:"End Date And Time",placeholder:"YYYY-MM-DD HH:MM",fieldType:"DateTime",contentType:"text",isRequired:!0,defaultValue:"",dbName:"end_date_and_time",readOnly:!1},{name:"archive",label:"Archive this Event",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"archive",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}]},{name:"is_published",label:"Should this event Go Live?",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"is_published",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}]},{name:"is_global",label:"Is this Event a Template?",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"is_global",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"false",fields:[{name:"community",label:"Primary Community",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:null,dbName:"community_id",data:t}]}}]},{name:"have_address",label:"Want to add an address for this event?",fieldType:"Radio",isRequired:!1,defaultValue:"false",dbName:"have_address",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"true",fields:[{name:"address",label:"Street Address",placeholder:"eg. Wayland",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"address",readOnly:!1},{name:"unit",label:"Unit Number",placeholder:'eg. "2A"',fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"",dbName:"unit",readOnly:!1},{name:"city",label:"City",placeholder:"eg. wayland",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"",dbName:"city",readOnly:!1},{name:"state",label:"State ",placeholder:"eg. New York",fieldType:"Dropdown",contentType:"text",isRequired:!1,data:c.a,defaultValue:"",dbName:"state",readOnly:!1}]}},{name:"description",label:"Event Description",placeholder:"eg. This event is happening in ...",fieldType:"HTMLField",isRequired:!0,defaultValue:null,dbName:"description"},{name:"image",placeholder:"Select an Image",fieldType:"File",dbName:"image",label:"Upload Files",selectMany:!1,isRequired:!1,defaultValue:"",filesLimit:1}]},e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})))),n.state={communities:[],formJson:null,loading:!0},n}var n,a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:(i=v(regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)("/tag_collections.listForCommunityAdmin");case 2:return t=e.sent,e.next=5,Object(f.a)("/communities.listForCommunityAdmin");case 5:if(!(n=e.sent)||!n.data){e.next=10;break}return a=n.data.map((function(e){return b({},e,{displayName:e.name})})),e.next=10,this.setStateAsync({communities:a});case 10:return e.next=12,this.createFormJson();case 12:return r=e.sent,t&&t.data&&(i={label:"Please select tag(s) that apply to this event",fieldType:"Section",children:[]},Object.values(t.data).forEach((function(e){var t={name:e.name,label:"".concat(e.name," ").concat(e.allow_multiple?"(You can select multiple)":"(Only one selection allowed)"),placeholder:"",fieldType:"Checkbox",selectMany:e.allow_multiple,defaultValue:[],dbName:"tags",data:e.tags.map((function(e){return b({},e,{displayName:e.name,id:""+e.id})}))};"Category"===e.name&&i.children.push(t)})),r.fields.splice(1,0,i)),e.next=16,this.setStateAsync({formJson:r,loading:!1});case 16:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.formJson;return t.loading?S:y("div",{},void 0,y(p.a,{classes:e,formJson:n}))}}])&&g(n.prototype,a),r&&g(n,r),t}(r.Component),R=Object(s.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:4*e.spacing.unit,textAlign:"center"}}}),{withTheme:!0})(N);function j(e){return(j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,a){x||(x="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);else t||(t=r||{});if(1===i)t.children=a;else if(i>1){for(var l=new Array(i),d=0;d<i;d++)l[d]=arguments[d+3];t.children=l}return{$$typeof:x,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){F(e,t,n[t])}))}return e}function E(e,t,n,a,r,i,o){try{var l=e[i](o),d=l.value}catch(e){return void n(e)}l.done?t(d):Promise.resolve(d).then(a,r)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){E(i,a,r,o,l,"next",e)}function l(e){E(i,a,r,o,l,"throw",e)}o(void 0)}))}}function q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A,M=k("h1",{},void 0,"Loading ..."),H=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=D(t).call(this,e),n=!r||"object"!==j(r)&&"function"!==typeof r?Y(a):r,F(Y(n),"getSelectedIds",(function(e,t){var n=[];return e.forEach((function(e){t.filter((function(t){return t.id===e.id})).length>0&&n.push(""+e.id)})),n})),F(Y(n),"createFormJson",function(){var e=V(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.communities,r={title:"Edit Event or Campaign",subTitle:"",method:"/events.update",successRedirectPage:"/admin/read/events",fields:[{label:"Update this event",fieldType:"Section",children:[{name:"event_id",label:"Event ID",placeholder:"Event ID",fieldType:"TextField",contentType:"number",isRequired:!0,defaultValue:t.id,dbName:"event_id",readOnly:!0},{name:"name",label:"Name of Event",placeholder:"Wayland Heatpump Event",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:t.name,dbName:"name",readOnly:!1},{name:"featured_summary",label:"One sentence that describes this event",placeholder:"Wayland Heatpump Event",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:t.featured_summary,dbName:"featured_summary",readOnly:!1},{name:"rank",label:"Rank (Which order should this event appear in?  Lower numbers come first)",placeholder:"eg. 1",fieldType:"TextField",contentType:"number",isRequired:!0,defaultValue:t.rank,dbName:"rank",readOnly:!1},{name:"start_date_and_time",label:"Start Date And Time",placeholder:"YYYY-MM-DD HH:MM",fieldType:"DateTime",contentType:"text",isRequired:!0,defaultValue:t.start_date_and_time,dbName:"start_date_and_time",readOnly:!1},{name:"end_date_and_time",label:"End Date And Time",placeholder:"YYYY-MM-DD HH:MM",fieldType:"DateTime",contentType:"text",isRequired:!0,defaultValue:t.end_date_and_time,dbName:"end_date_and_time",readOnly:!1},{name:"archive",label:"Archive this Event",fieldType:"Radio",isRequired:!1,defaultValue:""+t.archive,dbName:"archive",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}]},{name:"is_published",label:"Should this event Go Live?",fieldType:"Radio",isRequired:!1,defaultValue:""+t.is_published,dbName:"is_published",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}]},{name:"is_global",label:"Is this Event a Template?",fieldType:"Radio",isRequired:!1,defaultValue:""+t.is_global,dbName:"is_global",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"false",fields:[{name:"community",label:"Primary Community",placeholder:"eg. Wayland",fieldType:"Dropdown",defaultValue:t.community&&t.community.id,dbName:"community_id",data:a}]}}]},{name:"have_address",label:"Do you have an address?",fieldType:"Radio",isRequired:!1,defaultValue:t.location?"true":"false",dbName:"have_address",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"true",fields:[{name:"address",label:"Street Address",placeholder:"eg. Wayland",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:t.location&&t.location.address,dbName:"address",readOnly:!1},{name:"unit",label:"Unit Number",placeholder:'eg. "2A"',fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:t.location&&t.location.unit,dbName:"unit",readOnly:!1},{name:"city",label:"City",placeholder:"eg. wayland",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:t.location&&t.location.city,dbName:"city",readOnly:!1},{name:"state",label:"State ",placeholder:"eg. New York",fieldType:"Dropdown",contentType:"text",isRequired:!0,data:c.a,defaultValue:t.location&&t.location.state,dbName:"state",readOnly:!1}]}},{name:"description",label:"Event Description",placeholder:"eg. This event is happening in ...",fieldType:"HTMLField",isRequired:!0,defaultValue:t.description,dbName:"description"},{name:"image",placeholder:"Select an Image",fieldType:"File",dbName:"image",label:"Upload Files",selectMany:!1,isRequired:!0,previewLink:[t.image&&t.image.url],defaultValue:[],filesLimit:1}]},e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.state={communities:[],formJson:null},n}var n,a,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:(i=V(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,l,d,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,Object(f.a)("/events.info",{event_id:t});case 3:if(!(n=e.sent)||n.success){e.next=6;break}return e.abrupt("return");case 6:return a=n.data,e.next=9,Object(f.a)("/tag_collections.listForCommunityAdmin");case 9:return r=e.sent,e.next=12,Object(f.a)("/communities.listForCommunityAdmin");case 12:if(!(i=e.sent)||!i.data){e.next=17;break}return o=i.data.map((function(e){return P({},e,{displayName:e.name})})),e.next=17,this.setStateAsync({communities:o});case 17:return e.next=19,this.createFormJson(a);case 19:return l=e.sent,r&&r.data&&(d={label:"Please select tag(s) that apply to this event",fieldType:"Section",children:[]},Object.values(r.data).forEach((function(e){var t={name:e.name,label:"".concat(e.name," ").concat(e.allow_multiple?"(You can select multiple)":"(Only one selection allowed)"),placeholder:"",fieldType:"Checkbox",selectMany:e.allow_multiple,defaultValue:u.getSelectedIds(a.tags,e.tags),dbName:"tags",data:e.tags.map((function(e){return P({},e,{displayName:e.name,id:""+e.id})}))};"Category"===e.name&&d.children.push(t)})),l.fields.splice(1,0,d)),e.next=23,this.setStateAsync({formJson:l});case 23:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formJson;return t?k("div",{},void 0,k(p.a,{classes:e,formJson:t})):k("div",{style:{color:"white"}},void 0,M)}}])&&q(n.prototype,a),r&&q(n,r),t}(r.Component),J=Object(s.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:4*e.spacing.unit,textAlign:"center"}}}),{withTheme:!0})(H);function W(e){return(W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,n,a){A||(A="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);else t||(t=r||{});if(1===i)t.children=a;else if(i>1){for(var l=new Array(i),d=0;d<i;d++)l[d]=arguments[d+3];t.children=l}return{$$typeof:A,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(){return I(this,t),$(this,U(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=d.a.name+" - Event & Campaigns",t=d.a.desc,n=this.props.location.pathname.includes("edit");return L("div",{},void 0,L(o.Helmet,{},void 0,L("title",{},void 0,e),L("meta",{name:"description",content:t}),L("meta",{property:"og:title",content:e}),L("meta",{property:"og:description",content:t}),L("meta",{property:"twitter:title",content:e}),L("meta",{property:"twitter:description",content:t})),n&&i.a.createElement(J,this.props),!n&&i.a.createElement(R,this.props))}}])&&B(n.prototype,a),r&&B(n,r),t}(i.a.Component);t.default=z}}]);