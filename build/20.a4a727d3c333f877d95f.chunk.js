(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{f9a9688f81b8bcb66dae:function(e,a,o){"use strict";o.r(a);var t,n=o("8af190b70a6bc55c6f1b"),i=o.n(n),r=o("435859b6b76fb67a754a"),c=o.n(r),s=(o("8a2d1b95e05b6a321e74"),o("b912ecc4473ae8a2ff0b")),d=o.n(s),l=o("6938d226fd372a75cbf9"),u=o("b02fe3f80d4238b52f20"),m=o.n(u),f=o("921c0b8c557fe6ba5da8"),v=o.n(f),p=o("336be1f03a45da13ce56"),b=o.n(p),y=o("e777244f8e08c53fe98b"),h=o.n(y),g=o("432aae369667202efa42"),w=o.n(g),_=o("4cad7676f6ad23a52c95"),S=o("ecbdedbb63dd08b2841e"),C=o.n(S),N=o("d1481ba7d88efe885afa"),P=o.n(N),k=o("7991dcf2e4593f8d20cd"),O=o.n(k),j=o("ef58856f4f875bd36582"),A=o.n(j),x=o("48c6a90bb502f1cd38c8"),V=o.n(x),G=o("9dbc6075b7c57495657b"),z=o.n(G),T=o("b27e083e7741c2dccb3f"),M=o.n(T),D=o("be638c054224589367e1"),R=o.n(D),E=o("faee9a77346e3bbe7837"),L=o.n(E),W=o("0d329ab684f26e01f269"),I=o.n(W),Y=o("ae9538ef385040398af3"),B=o.n(Y),F=(o("0b934d4347e858d0ab66"),o("4028a1175ce9b71ed1d9")),H=o.n(F),J=o("03fb0036f9fdca151d0b"),U=o("d7bfaa0565a013ac2028"),$=o("1035762efa586c05d038"),q=o("d18b150bf005d511c70c"),K=o.n(q),Q=o("b8d4965bd52b94937ce4"),X=o("39cd24fdebf6cbef88a3"),Z=o("c82f135c42c3c148fae5"),ee=o.n(Z);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,a,o,n){t||(t="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(a||0===r||(a={children:void 0}),a&&i)for(var c in i)void 0===a[c]&&(a[c]=i[c]);else a||(a=i||{});if(1===r)a.children=n;else if(r>1){for(var s=new Array(r),d=0;d<r;d++)s[d]=arguments[d+3];a.children=s}return{$$typeof:t,type:e,key:void 0===o?null:""+o,ref:null,props:a,_owner:null}}function te(e,a,o,t,n,i,r){try{var c=e[i](r),s=c.value}catch(e){return void o(e)}c.done?a(s):Promise.resolve(s).then(t,n)}function ne(e,a){for(var o=0;o<a.length;o++){var t=a[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,a){return(ce=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function se(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}var de=oe(C.a,{},void 0,oe(I.a,{})),le=oe(C.a,{},void 0,oe(V.a,{})),ue=oe(C.a,{},void 0,oe(L.a,{})),me=oe(C.a,{},void 0,oe(V.a,{})),fe=oe(C.a,{},void 0,oe(O.a,{})),ve=oe(C.a,{},void 0,oe(I.a,{})),pe=oe(B.a,{}),be=oe(B.a,{}),ye=oe(B.a,{}),he=oe(z.a,{}),ge=oe(ee.a,{size:20,thickness:2,color:"secondary"}),we=oe(ee.a,{size:20,thickness:2,color:"secondary"}),_e=oe(ee.a,{size:20,thickness:2,color:"secondary"}),Se=function(e){function a(e){var o,t,n;return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),t=this,n=ie(a).call(this,e),o=!n||"object"!==ae(n)&&"function"!==typeof n?re(t):n,se(re(o),"getTags",(function(e){return e.map((function(e){return e.name})).join(", ")})),se(re(o),"handleCloseStyle",(function(e,a){"clickaway"!==a&&o.setState({error:null})})),o.state={error:null,loadingCSVs:[]},o}var o,t,n,r,s;return function(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&ce(e,a)}(a,e),o=a,(t=[{key:"getCSV",value:(r=regeneratorRuntime.mark((function e(a){var o,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props.community){e.next=3;break}return e.abrupt("return");case 3:return t=this.state.loadingCSVs,this.setState({loadingCSVs:t.concat(a)}),e.next=7,Object(X.b)("/downloads."+a,{community_id:o.id});case 7:n=e.sent,(t=this.state.loadingCSVs).splice(t.indexOf(a),1),n.success?Object($.a)(n.file):this.setState({error:n.error}),this.setState({loadingCSVs:t});case 12:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,a=arguments;return new Promise((function(o,t){var n=r.apply(e,a);function i(e){te(n,o,t,i,c,"next",e)}function c(e){te(n,o,t,i,c,"throw",e)}i(void 0)}))},function(e){return s.apply(this,arguments)})},{key:"getGoalPercentage",value:function(){var e=this.props.community?this.props.community:0;if(0!==e){var a=e.goal?e.goal:{},o=a.target_carbon_footprint_reduction,t=a.attained_carbon_footprint_reduction;return o?t/o*100:0}return 0}},{key:"actionsGoalPercentage",value:function(){var e=this.props.community?this.props.community:0;if(0!==e){var a=e.goal?e.goal:{},o=a.target_number_of_actions,t=a.attained_number_of_actions;return o?Math.round(100*t/o):0}return 0}},{key:"userGoalPercentage",value:function(){var e=this.props.community?this.props.community:0;if(0!==e){var a=e.goal?e.goal:{},o=a.target_number_of_households,t=a.attained_number_of_households;return o?Math.round(100*t/o):0}return 0}},{key:"render",value:function(){var e=this,a=this.props,o=a.classes,t=a.community,n=("/admin/edit/".concat(t?t.id:null,"/goal"),"/admin/edit/".concat(t?t.id:null,"/community/community-admin")),r="/admin/edit/".concat(t?t.id:null,"/community-admins"),s=this.state,l=s.error,u=s.loadingCSVs;return i.a.createElement(i.a.Fragment,null,l&&oe("div",{},void 0,oe(K.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:null!=l,autoHideDuration:6e3,onClose:this.handleCloseStyle},void 0,oe(Q.a,{onClose:this.handleCloseStyle,variant:"error",message:"Unable to download: ".concat(l)}))),oe(c.a,{container:!0,alignItems:"flex-start",justify:"flex-start",direction:"row",spacing:24},void 0,oe(c.a,{item:!0,md:6,xs:12},void 0,oe("div",{className:o.progressRoot},void 0,oe(m.a,{className:o.styledPaper,elevation:4},void 0,oe(v.a,{className:o.title,variant:"h5",component:"h3"},void 0,oe("center",{},void 0,oe("span",{className:H.a.light,style:{textAlign:"center"}},void 0,"#Actions Goal"))),oe(c.a,{container:!0,justify:"center"},void 0,oe(R.a,{avatar:de,label:"".concat(this.actionsGoalPercentage(),"% Progress"),className:o.chip,color:"primary"})),oe(P.a,{variant:"determinate",className:o.progress,value:this.actionsGoalPercentage()}))),oe(J.a,{title:"About Community",icon:"ios-contact-outline",whiteBg:!0,noMargin:!0,desc:"".concat(t?t.about_community:"")},void 0,oe(M.a,{className:o.divider}),oe(b.a,{dense:!0,className:o.profileList},void 0,oe(h.a,{},void 0,le,oe(w.a,{primary:"Admin Name",secondary:"".concat(t.owner_name)})),oe(h.a,{},void 0,ue,oe(w.a,{primary:"Admin Email",secondary:"".concat(t.owner_email)})),oe(h.a,{},void 0,me,oe(w.a,{primary:"Date Registered",secondary:"".concat(Object(_.default)(t.created_at).format("MMMM Do YYYY, h:mm:ss a"))})),oe(h.a,{},void 0,fe,oe(w.a,{primary:"Phone Number",secondary:"".concat(t.owner_phone_number||"No Phone Number Provided")}))),oe(M.a,{className:o.divider}),oe(b.a,{dense:!0,className:o.profileList},void 0,"Community Admins",t&&t.admins&&t.admins.map((function(e){return oe(h.a,{},e.email,e.profile_picture&&oe(C.a,{alt:e.initials,src:e.profile_picture.url,style:{margin:10}}),!e.profile_picture&&oe(C.a,{style:{margin:10}},void 0,e.preferred_name.substring(0,2)),oe(w.a,{primary:e.preferred_name,secondary:e.email}))})))),oe(M.a,{className:o.divider})),oe(c.a,{item:!0,md:6,xs:12},void 0,oe("div",{className:o.progressRoot},void 0,oe(m.a,{className:o.styledPaper,elevation:4},void 0,oe(v.a,{className:o.title,variant:"h5",component:"h3"},void 0,oe("center",{},void 0,oe("span",{className:H.a.light,style:{textAlign:"center"}},void 0,"#Household Goal"))),oe(c.a,{container:!0,justify:"center"},void 0,oe(R.a,{avatar:ve,label:"".concat(this.userGoalPercentage(),"% Progress"),className:o.chip,color:"primary"})),oe(P.a,{variant:"determinate",className:o.progress,value:this.userGoalPercentage()}))),oe(J.a,{title:"More Details",icon:"ios-aperture-outline",whiteBg:!0,desc:""},void 0,oe(c.a,{container:!0,className:o.colList},void 0,oe(c.a,{item:!0,md:6},void 0,oe(h.a,{},void 0,oe(C.a,{className:d()(o.avatar,o.purpleAvatar)},void 0,pe),oe(w.a,{primary:"Subdomain",secondary:"".concat(t.subdomain)}))),oe(c.a,{item:!0,md:6},void 0,oe(h.a,{},void 0,oe(C.a,{className:d()(o.avatar,o.greenAvatar)},void 0,be),oe(w.a,{primary:"Is Geographically Focused",secondary:"".concat(t.is_geographically_focused)}))),oe(c.a,{item:!0,md:6},void 0,oe(h.a,{},void 0,oe(C.a,{className:d()(o.avatar,o.pinkAvatar)},void 0,ye),oe(w.a,{primary:"Is Approved",secondary:"".concat(t.is_approved)}))),oe(c.a,{item:!0,md:6},void 0,oe(h.a,{},void 0,oe(C.a,{className:d()(o.avatar,o.orangeAvatar)},void 0,he),oe(w.a,{primary:"Location",secondary:"".concat(Object($.b)(t.location))})))),oe(m.a,{onClick:function(){return Object($.c)(r)},className:"".concat(o.pageCard),elevation:1},void 0,oe(v.a,{variant:"h5",style:{fontWeight:"600",fontSize:"1rem"},component:"h3"},void 0,"Add/Remove Administrators for Community"," ",oe(A.a,{style:{paddingTop:3,color:"green"}},void 0,"forward"))),oe(m.a,{onClick:function(){return Object($.c)(n)},className:"".concat(o.pageCard),elevation:1},void 0,oe(v.a,{variant:"h5",style:{fontWeight:"600",fontSize:"1rem"},component:"h3"},void 0,"Edit Community Info"," ",oe(A.a,{style:{paddingTop:3,color:"green"}},void 0,"forward")))))),oe(c.a,{container:!0,className:o.colList},void 0,oe(c.a,{item:!0,xs:4},void 0,oe(m.a,{onClick:function(){!u.includes("users")&&e.getCSV("users")},className:"".concat(o.pageCard),elevation:1},void 0,oe(v.a,{variant:"h5",style:{fontWeight:"600",fontSize:"1rem"},component:"h3"},void 0,"Download Users CSV"," ",oe(A.a,{style:{paddingTop:3,color:"green"}},void 0,"arrow_downward"),u.includes("users")&&ge))),oe(c.a,{item:!0,xs:4},void 0,oe(m.a,{onClick:function(){!u.includes("actions")&&e.getCSV("actions")},className:"".concat(o.pageCard),elevation:1},void 0,oe(v.a,{variant:"h5",style:{fontWeight:"600",fontSize:"1rem"},component:"h3"},void 0,"Download Actions CSV"," ",oe(A.a,{style:{paddingTop:3,color:"green"}},void 0,"arrow_downward"),u.includes("actions")&&we))),oe(c.a,{item:!0,xs:4},void 0,oe(m.a,{onClick:function(){!u.includes("teams")&&e.getCSV("teams")},className:"".concat(o.pageCard),elevation:1},void 0,oe(v.a,{variant:"h5",style:{fontWeight:"600",fontSize:"1rem"},component:"h3"},void 0,"Download Teams CSV"," ",oe(A.a,{style:{paddingTop:3,color:"green"}},void 0,"arrow_downward"),u.includes("teams")&&_e)))))}}])&&ne(o.prototype,t),n&&ne(o,n),a}(i.a.Component);a.default=Object(l.withStyles)(U.a)(Se)}}]);