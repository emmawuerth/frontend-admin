(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"3f6e4cc061511ad1bb0c":function(e,t,n){"use strict";n.r(t);var o,a=n("8af190b70a6bc55c6f1b"),i=(n("8a2d1b95e05b6a321e74"),n("6938d226fd372a75cbf9")),r=n("cba78edefe8c800ee17e"),l=n("39cd24fdebf6cbef88a3");function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,a){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var l in i)void 0===t[l]&&(t[l]=i[l]);else t||(t=i||{});if(1===r)t.children=a;else if(r>1){for(var c=new Array(r),d=0;d<r;d++)c[d]=arguments[d+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){T(e,t,n[t])}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t,n,o,a,i,r){try{var l=e[i](r),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(e){p(i,o,a,r,l,"next",e)}function l(e){p(i,o,a,r,l,"throw",e)}r(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=d("div",{},void 0,"Hold tight! Retrieving your data ..."),x=d("div",{},void 0,"Sorry no Home Page data available for this community ..."),v=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=_(t).call(this,e),n=!a||"object"!==c(a)&&"function"!==typeof a?y(o):a,T(y(n),"createFormJson",m(regeneratorRuntime.mark((function e(){var t,o,a,i,r,l,c,d,p,m,b,_,y,h,T,g,x,v,w,O,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,o=t.homePageData,a=t.events,i=o.community,r=o.featured_events,l=o.images,c=o.featured_links,l||(l=[]),c||(c=[]),d=f(l,3),p=d[0],m=d[1],b=d[2],_=f(c,4),y=_[0],h=_[1],T=_[2],g=_[3],x=o.goal,v=o&&r?r.map((function(e){return""+e.id})):[],w=r.filter((function(e){return!e.is_published})).map((function(e){return s({},e,{displayName:"(Archived) "+e.name,id:""+e.id})})),O=[].concat(u(w),u(a)),k={title:"Edit ".concat(i?i.name+"'s":"Community's"," HomePage"),subTitle:"",method:"/home_page_settings.update",fields:[{name:"id",label:"ID",placeholder:"eg. 1",fieldType:"TextField",contentType:"number",isRequired:!0,defaultValue:"".concat(o.id),dbName:"id",readOnly:!0},{label:"Welcome Title and Pictures",fieldType:"Section",children:[{name:"description",label:"Welcome Text: Displayed right below the three images",placeholder:"eg. Join our effort to fight climate risks ...",fieldType:"TextField",contentType:"text",isRequired:!0,defaultValue:"".concat(o.description),dbName:"description",readOnly:!1}]},{label:"Upload your 3 pictures",fieldType:"Section",children:[{name:"image_1",placeholder:"Picture 1",fieldType:"File",dbName:"image_1",label:"Upload Picture 1",previewLink:"".concat(p&&p.url),selectMany:!1,isRequired:!1,defaultValue:[],filesLimit:1,imageAspectRatio:"4:3"},{name:"image_2",placeholder:"Picture 2",fieldType:"File",dbName:"image_2",previewLink:"".concat(m&&m.url),label:"Upload Picture 2",selectMany:!1,isRequired:!1,defaultValue:[],filesLimit:1,imageAspectRatio:"4:3"},{name:"image_3",placeholder:"Picture 3",fieldType:"File",previewLink:"".concat(b&&b.url),dbName:"image_3",label:"Upload Picture 3",selectMany:!1,isRequired:!1,defaultValue:[],filesLimit:1,imageAspectRatio:"4:3"}]},{label:"Home Page Statistics",fieldType:"Section",children:[{name:"show_featured_stats",label:"Should we display summary Stats on your home page?",fieldType:"Radio",isRequired:!1,defaultValue:"".concat(o.show_featured_stats),dbName:"show_featured_stats",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"true",fields:[{name:"attained_number_of_actions",label:"Manual Input: Attained Number of Actions",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.attained_number_of_actions,dbName:"attained_number_of_actions",readOnly:!1},{name:"organic_attained_number_of_actions",label:"Organic Website Usage: Attained Number of Actions",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.organic_attained_number_of_actions,dbName:"organic_attained_number_of_actions",readOnly:!0},{name:"target_number_of_actions",label:"Target Number of Actions",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.target_number_of_actions,dbName:"target_number_of_actions",readOnly:!1},{name:"attained_number_of_households",label:"Manual Input: How many households joined this community?",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.attained_number_of_households,dbName:"attained_number_of_households",readOnly:!1},{name:"organic_attained_number_of_households",label:"Organic Website Usage: How many households joined this community?",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.organic_attained_number_of_households,dbName:"organic_attained_number_of_households",readOnly:!0},{name:"target_number_of_households",label:"How many households are expected to join this community?",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.target_number_of_households,dbName:"target_number_of_households",readOnly:!1},{name:"attained_carbon_footprint_reduction",label:"Manual Input: Community carbon footprint reduction previously attained (lbs)",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.attained_carbon_footprint_reduction,dbName:"attained_carbon_footprint_reduction",readOnly:!1},{name:"organic_attained_carbon_footprint_reduction",label:"Organic Website Usage: Carbon Footprint Reduction (lbs)",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.organic_attained_carbon_footprint_reduction,dbName:"organic_attained_carbon_footprint_reduction",readOnly:!0},{name:"target_carbon_footprint_reduction",label:"Goal for Carbon Footprint Reduction (lbs.)",placeholder:"eg. 100",fieldType:"TextField",contentType:"number",isRequired:!1,defaultValue:x&&x.target_carbon_footprint_reduction,dbName:"target_carbon_footprint_reduction",readOnly:!1}]}}]},{label:"Events Section",fieldType:"Section",children:[{name:"show_featured_events",label:"Should we display some selected events on the home page?",fieldType:"Radio",isRequired:!1,defaultValue:"".concat(o.show_featured_events),dbName:"show_featured_events",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"true",fields:[{name:"featured_events",label:"Select which events to show up on the home Page",placeholder:"",fieldType:"Checkbox",selectMany:!0,defaultValue:v,dbName:"featured_events",data:O}]}}]},{label:"Icon Links: The four icon boxes on the Home Page",fieldType:"Section",children:[{name:"show_featured_links",label:"Do you want to display the icon boxes on your home page?",fieldType:"Radio",isRequired:!1,defaultValue:"".concat(o.show_featured_links),dbName:"show_featured_links",readOnly:!1,data:[{id:"false",value:"No"},{id:"true",value:"Yes"}],child:{valueToCheck:"true",fields:[{label:"Icon Box 1",fieldType:"Section",children:[{name:"icon_box_1_title",label:"Title on Icon Box 1",placeholder:"eg. Take Action",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(y&&y.title),dbName:"icon_box_1_title",readOnly:!1},{name:"icon_box_1_icon",label:"Put an icon Name: (select from ...)",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(y&&y.icon),dbName:"icon_box_1_icon",readOnly:!1},{name:"icon_box_1_link",label:"Url: When someone clicks, where should it go?",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(y&&y.link),dbName:"icon_box_1_link",readOnly:!1},{name:"icon_box_1_description",label:"Short description the card (no more than 20 characters)",placeholder:"Tell us more ...",fieldType:"TextField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:"".concat(y&&y.description),dbName:"icon_box_1_description",readOnly:!1}]},{label:"Icon Box 2",fieldType:"Section",children:[{name:"icon_box_2_title",label:"Title on Icon Box 2",placeholder:"eg. Take Action",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(h&&h.title),dbName:"icon_box_2_title",readOnly:!1},{name:"icon_box_2_icon",label:"Put an icon Name: (select from ...)",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(h&&h.icon),dbName:"icon_box_2_icon",readOnly:!1},{name:"icon_box_2_link",label:"Url: When someone clicks, where should it go?",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(h&&h.link),dbName:"icon_box_2_link",readOnly:!1},{name:"icon_box_2_description",label:"Short description the card (no more than 20 characters)",placeholder:"Tell us more ...",fieldType:"TextField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:"".concat(h&&h.description),dbName:"icon_box_2_description",readOnly:!1}]},{label:"Icon Box 3",fieldType:"Section",children:[{name:"icon_box_3_title",label:"Title on Icon Box 1",placeholder:"eg. Take Action",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(T&&T.title),dbName:"icon_box_3_title",readOnly:!1},{name:"icon_box_3_icon",label:"Put an icon Name: (select from ...)",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(T&&T.icon),dbName:"icon_box_3_icon",readOnly:!1},{name:"icon_box_3_link",label:"Url: When someone clicks, where should it go?",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(T&&T.link),dbName:"icon_box_3_link",readOnly:!1},{name:"icon_box_3_description",label:"Short description the card (no more than 20 characters)",placeholder:"Tell us more ...",fieldType:"TextField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:"".concat(T&&T.description),dbName:"icon_box_3_description",readOnly:!1}]},{label:"Icon Box 4",fieldType:"Section",children:[{name:"icon_box_4_title",label:"Title on Icon Box 1",placeholder:"eg. Take Action",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(g&&g.title),dbName:"icon_box_4_title",readOnly:!1},{name:"icon_box_4_icon",label:"Put an icon Name: (select from ...)",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(g&&g.icon),dbName:"icon_box_4_icon",readOnly:!1},{name:"icon_box_4_link",label:"Url: When someone clicks, where should it go?",placeholder:"eg. 100",fieldType:"TextField",contentType:"text",isRequired:!1,defaultValue:"".concat(g&&g.link),dbName:"icon_box_4_link",readOnly:!1},{name:"icon_box_4_description",label:"Short description the card (no more than 20 characters)",placeholder:"Tell us more ...",fieldType:"TextField",contentType:"text",isRequired:!0,isMultiline:!0,defaultValue:"".concat(g&&g.description),dbName:"icon_box_4_description",readOnly:!1}]}]}}]}]},e.abrupt("return",k);case 13:case"end":return e.stop()}}),e)})))),n.state={formJson:null,homePageData:null,events:null,noDataFound:!1},n}var n,o,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:(i=m(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,Object(l.a)("/home_page_settings.info",{community_id:t});case 3:if(!(n=e.sent)||!n.success){e.next=9;break}return e.next=7,this.setStateAsync({homePageData:n.data});case 7:e.next=12;break;case 9:return e.next=11,this.setStateAsync({noDataFound:!0,formJson:{}});case 11:return e.abrupt("return");case 12:return e.next=14,Object(l.a)("/events.list",{community_id:t});case 14:if(!(o=e.sent)||!o.data){e.next=21;break}return a=o.data.map((function(e){return s({},e,{displayName:e.name,id:""+e.id})})),e.next=19,this.setStateAsync({events:a});case 19:e.next=24;break;case 21:return e.next=23,this.setStateAsync({noDataFound:!0,formJson:{}});case 23:return e.abrupt("return");case 24:return e.next=26,this.createFormJson(n.data);case 26:return i=e.sent,e.next=29,this.setStateAsync({formJson:i,noDataFound:!1});case 29:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,n)}))}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.formJson,o=t.noDataFound;return n?o?x:d("div",{},void 0,d(r.a,{classes:e,formJson:n})):g}}])&&b(n.prototype,o),a&&b(n,a),t}(a.Component);t.default=Object(i.withStyles)((function(e){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:4*e.spacing.unit,textAlign:"center"}}}),{withTheme:!0})(v)}}]);